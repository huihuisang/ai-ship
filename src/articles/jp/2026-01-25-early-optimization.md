---
title: "AI で早期最適化がより価値を持つ"
date: "2026-01-25"
tools: ["codex"]
category: "仕事"
action_button:
  text: "Chroma 原文を読む"
  url: "https://onevcat.com/2026/01/chroma/"
---

Chroma（Swift のターミナル向け構文ハイライトライブラリ）と `ca`（`cat` のハイライト代替）で記録すべきなのは機能ではなく、AI が性能最適化の価値を拡大した点だ。継続的な benchmark 主導の反復で、tokenizer と renderer の性能はおよそ 10 倍まで押し上げられた。

やり方は単純だ。benchmark を一等市民として扱い、AI にコードを読ませてボトルネックを探し、案を出させ、理論的に効果を見積もる。毎回小さな変更だけを行い、すぐに計測して次へ反映する。最適化は「仮説—検証—修正」の科学実験になる。AI の価値は天才的な微調整ではなく、試行錯誤のコストを下げ、最後までやり切れるようにする点にある。

代表的な最適化もそれを示す。tokenizer/renderer を batch パイプラインから streaming に変更してメモリとコピーを体系的に削減。ASCII が支配的な入力には fast-path を用意し、非 ASCII では安全経路にフォールバックする。どれも「ひらめき一発」ではないが、細かな変更と検証が必要で、まさに AI が担う部分だ。

だから「早すぎる最適化は万悪の源」は AI 時代に再解釈が必要だ。かつて早期最適化を避けたのは試行錯誤が高コストだったからだが、AI ではその負担が下がり、多くの最適化を前倒しで設計し早期に検証できる。早期最適化は工学的合理性に反するどころか、効率的な道だと感じている。
